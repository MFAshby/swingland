<project name="Swingland" default="compile">
	<target name="clean">
		<delete dir="bin"/>
	</target>

	<target name="compile">
		<mkdir dir="bin"/>
		<javac includeantruntime="no" debug="true" srcdir="src" destdir="bin" />
		<!-- ANT does not support setting the module main class attribute directly, so we have to poke 'jar' ourselves -->
		<echo message="[jar] Building bin/swingland.jar as module with main class com.ashbysoft.power_meter.PowerMeter"/>
		<exec executable="jar">
			<arg value="cfme"/>
			<arg value="bin/swingland.jar"/>
			<arg value="src/MANIFEST.MF"/>
			<arg value="com.ashbysoft.power_meter.PowerMeter"/>
			<arg value="-C"/>
			<arg value="bin"/>
			<arg value="."/>
		</exec>
	</target>

	<target name="test" depends="compile">
		<java modulepath="bin/swingland.jar" module="com.ashbysoft.swingland" fork="true">
			<arg value="timmy"/><arg value="2400"/>
		</java>
	</target>

</project>
